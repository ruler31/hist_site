<!DOCTYPE html>
<html lang="{{ session.get('language', 'en') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ 'History of Everything' if session.get('language') == 'en' else 'История всего' }}</title>
    <link rel="stylesheet" href="/static/main.css">
    <style>
        .flash-message {
            position: fixed;
            left: 20px;
            bottom: 20px;
            padding: 10px;
            background-color: gray;
            color: white;
            border-radius: 5px;
            display: none;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .flash-message.show {
            display: block;
            opacity: 1;
        }

        .flash-message.email_error {
            background-color: #f44336;  /* Красный для email ошибок */
        }

        .flash-message.password_error {
            background-color: #ff9800;  /* Оранжевый для паролей */
        }

        .flash-message.password_strength_error {
            background-color: #ff5722;  /* Темно-оранжевый для слабых паролей */
        }

        .flash-message.username_error {
            background-color: #607d8b;  /* Синий для ошибок с логином */
        }
    </style>
</head>
<body>

    <!-- Обработка флеш-сообщений -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash-message {{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- Вверх сайта -->
    <header class="header">
        <div class="main-container">
            <div class="navbar">
                <div class="logo">
                    <a href="/">
                        <img src="/static/img/Logo-img.png" alt="logo" class="logo-photo">
                    </a>
                </div>
                <div class="navbar-menu">
                    <div class="review">
                        <a href="/templates/review.html" class="review-link">
                            <h4 class="review-link-name navbar-name h4-text">
                                {{ 'Leave a review about our site!' if session.get('language') == 'en' else 'Оставьте отзыв о нашем сайте!' }}
                            </h4>
                        </a>
                    </div>
                    <div class="authors">
                        <a href="/templates/authors.html" class="authors-link">
                            <h4 class="authors-link-name navbar-name h4-text">
                                {{ 'The authors of the site' if session.get('language') == 'en' else 'Авторы сайта' }}
                            </h4>
                        </a>
                    </div>
                    {% if username %}
                        <div class="user-menu">
                            <span class="user-name">{{ username }}</span>
                            <div class="user-dropdown">
                                <a href="/templates/history.html">{{ 'History' if session.get('language') == 'en' else 'История' }}</a>
                                <a href="/templates/favourites.html">{{ 'Favorites' if session.get('language') == 'en' else 'Избранное' }}</a>
                                <a href="/logout">{{ 'Log Out' if session.get('language') == 'en' else 'Выйти' }}</a>
                            </div>
                        </div>
                    {% else %}
                        <div class="registration">
                            <div class="registration-login">
                                <a href="/templates/login.html" class="registration-login-link">
                                    <h5 class="registration-login-link-name h5-text">
                                        {{ 'Log In' if session.get('language') == 'en' else 'Войти' }}
                                    </h5>
                                </a>
                            </div>
                            <div class="registration-between-line"></div>
                            <div class="registration-sign-up">
                                <a href="/templates/sign-up" class="registration-sign-up-link">
                                    <h5 class="registration-sign-up-link-name h5-text">
                                        {{ 'Sign Up' if session.get('language') == 'en' else 'Регистрация' }}
                                    </h5>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                    <div class="dropdown-auth-lang dropdown-auth">
                        <button class="dropbtn-auth dropbtn-auth-lang-pic site-text-main"><img src="/static/img/icons8-гугл-переводчик.svg" alt="#"></button>
                        <div class="dropdown-auth-content dropdown-auth-content-lang">
                            <a href="/set_language/ru" class="rs-link menu-link h5-text">Русский</a>
                            <a href="/set_language/en" class="ea-link menu-link h5-text">English</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Основная часть страницы -->
    <main class="main main-su">
        <div class="mid-container">
            <form class="su-form" method="POST">
                <h1 class="su-header-name h1-text">{{ 'Sign Up' if session.get('language') == 'en' else 'Регистрация' }}</h1>
                <input type="text" class="username form-su-el emails-link-name" name="username" placeholder="{{ 'Login' if session.get('language') == 'en' else 'Логин' }}" required>
                <input type="email" class="email form-su-el emails-link-name" name="email" placeholder="{{ 'E-mail' if session.get('language') == 'en' else 'Электронная почта' }}" required>
                <input type="password" class="password form-su-el emails-link-name" name="password" placeholder="{{ 'Password' if session.get('language') == 'en' else 'Пароль' }}" required>
                <input type="password" class="password-again form-su-el emails-link-name" name="password-again" placeholder="{{ 'Password again' if session.get('language') == 'en' else 'Повторите пароль' }}" required>
                <button type="submit" class="form-su-btn h5-text">{{ 'Sign Up' if session.get('language') == 'en' else 'Зарегистрироваться' }}</button>
                <a href="/templates/login.html" class="login">
                    <span class="info-su info emails-link-name">
                        {{ 'Have an account? Login' if session.get('language') == 'en' else 'Уже есть аккаунт? Войти' }}
                    </span>
                </a>
            </form>
        </div>
    </main>

    <!-- Подвал -->
    <footer class="footer">
        <div class="main-container">
            <div class="contacts">
                <div class="emails">
                    <div class="contacts-first-text">
                        <h5 class="contacts-first-text-name h5-text">
                            {{ 'Have any questions? Write them on those e-mails:' if session.get('language') == 'en' else 'Есть вопросы? Напишите их на эти e-mail:' }}
                        </h5>
                    </div>
                    <div class="emails-names">
                        <a href="" class="emails-first-link">
                            <span class="emails-first-link-name emails-link-name">Dictionary-of-evolutions@yandex.ru</span>
                        </a>
                    </div>
                    <div class="contacts-second-text">
                        <h5 class="contacts-second-text-name h5-text">
                            {{ 'or in our social media channels:' if session.get('language') == 'en' else 'или в наших социальных сетях:' }}
                        </h5>
                    </div>
                </div>
                <div class="social-media">
                    <div class="social-media-icons">
                        <div class="social-media-icon">
                            <a href="https://t.me/Dictionary_of_evolutions" target="_blank" class="social-media-icon-link">
                                <img src="/static/img/Social media icons/tg-icon.svg" alt="telegram" class="social-media-icon-photo">
                            </a>
                        </div>
                        <div class="social-media-icon">
                            <a href="https://chat.whatsapp.com/EI1k6oGulP71rzLXWm0Uoy" target="_blank" class="social-media-icon-link">
                                <img src="/static/img/Social media icons/whatsapp-icon.svg" alt="whatsapp" class="social-media-icon-photo">
                            </a>
                        </div>
                        <div class="social-media-icon">
                            <a href="https://invite.viber.com/?g2=AQBcGobe9%2FkLMFPpyrg6hJdaj%2FWY6%2BncEdEC4bGW5MZjZt8xiXyNhx4aecHcTQDk" target="_blank" class="social-media-icon-link">
                                <img src="/static/img/Social media icons/viber-icon.svg" alt="viber" class="social-media-icon-photo">
                            </a>
                        </div>
                        <div class="social-media-icon">
                            <a href="https://vk.com/club228609143" target="_blank" class="social-media-icon-link">
                                <img src="/static/img/Social media icons/vk-icon.svg" alt="VK" class="social-media-icon-photo">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <div class="copyright-info">
                    <img src="/static/img/copyright-icon.png" alt="copyright" class="copyright-photo">
                    <span class="copyright-text">2024 - {{ 'History of Everything' if session.get('language') == 'en' else 'История всего' }}</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Показать флеш-сообщение и скрыть его через несколько секунд
        window.onload = function() {
            var flashMessages = document.querySelectorAll('.flash-message');
            flashMessages.forEach(function(msg) {
                setTimeout(function() {
                    msg.classList.add('show');
                }, 500);  // Показываем через 0.5 секунды

                setTimeout(function() {
                    msg.classList.remove('show');
                }, 4000);  // Скрываем через 4 секунды
            });
        };
    </script>

</body>
</html>
